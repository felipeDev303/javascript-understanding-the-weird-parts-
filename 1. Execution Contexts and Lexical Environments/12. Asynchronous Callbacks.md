# Asynchronous Callbacks

## 1. ¿Qué es un Callback?

**Definición:**  
Función que se pasa como argumento a otra función para ser ejecutada más adelante.

```js
function greet(name, callback) {
  callback(`Hola, ${name}`);
}
```

Hasta aquí, todo es síncrono.

---

## 2. Asynchronous Callback

**Definición:**  
Callback que NO se ejecuta de inmediato, sino que es enviado a Web API (navegador) o libuv (Node.js) y se ejecuta después, cuando el Event Loop lo permite.

**Ejemplos típicos:**
- `setTimeout`
- `addEventListener`
- peticiones con `fetch`
- operaciones de I/O en Node

**Ejemplo:**
```js
console.log("Inicio");

setTimeout(() => {
  console.log("Esto ocurre después");
}, 1000);

console.log("Fin");
```

**Salida:**
```
Inicio
Fin
Esto ocurre después
```

---

## 3. Proceso de ejecución

**Ejemplo:**
```js
console.log("1");

setTimeout(() => {
  console.log("2");
}, 0);

console.log("3");
```

**Pasos:**

1. `console.log("1")` → se ejecuta inmediatamente
2. `setTimeout(..., 0)` → el callback va al Web API
3. `console.log("3")` → se ejecuta inmediatamente
4. Web API termina el temporizador
5. Callback va a la Event Queue
6. Event Loop verifica si el Call Stack está vacío
7. Si está vacío, entrega el callback al Call Stack
8. Callback ejecutado → imprime "2"

**Salida:**
```
1
3
2
```

---

## 4. Razón de existencia

JavaScript es single-threaded pero quiere ser no bloqueante.

**Sin callbacks asíncronos:**
- Una petición HTTP bloquearía la app
- Una lectura de archivo congelaría la UI
- Una animación se trabaría

**Con callbacks asíncronos:**
- Alta concurrencia
- Interfaces fluidas
- Servidores Node rápidos
- Evita bloqueos

---

## 5. Scope y Closures en Callbacks

Cuando un callback se ejecuta:

1. Se crea un nuevo Function Execution Context
2. Con su propio Variable Environment, Lexical Environment y this binding
3. Conserva acceso a su Scope Chain original (closure)

**Ejemplo:**
```js
function outer() {
  let x = 10;

  setTimeout(function() {
    console.log(x); // 10
  }, 1000);
}

outer();
```

Aunque `outer()` ya terminó, el callback aún recuerda `x`.

---

Anterior tema: [Scope, ES6 & let](./9.%20Scope%2C%20ES6%20%26%20let.md) | Siguiente tema: [Dynamic Typing](./11.%20Dynamic%20Typing.md) | Volver al índice: [Índice Temático](./README.md)
