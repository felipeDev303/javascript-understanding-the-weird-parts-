# The Scope Chain

## Definición

Mecanismo que JavaScript utiliza para buscar variables cuando una línea de código necesita acceder a una.

**Estructura:**  
Lista jerárquica de Lexical Environments encadenados que se conectan siguiendo dónde se escribió el código (no dónde se ejecuta).

---

## Funcionamiento de la búsqueda de variables

Cuando el motor necesita un valor:

1. Revisa el **Environment Record** actual
2. Si no lo encuentra, busca en el **Outer Environment**
3. Continúa subiendo por la cadena
4. Hasta llegar al **Global Environment**
5. Si no existe allí → **ReferenceError**

**Dirección de búsqueda:**  
Siempre desde adentro hacia afuera. Nunca al revés.

---

## Ejemplo

```js
let a = 10;

function outer() {
  let b = 20;

  function inner() {
    let c = 30;
    console.log(a, b, c);
  }

  inner();
}
outer();
```

**Scope chain en `inner()`:**

```
inner LE
  ├─ c = 30
  └─ outer → outer LE
             ├─ b = 20
             └─ outer → Global LE
                        ├─ a = 10
```

El motor hace:
- ¿`c` está en `inner`? ✓ Sí
- ¿`b` está en `outer`? ✓ Sí
- ¿`a` está en global? ✓ Sí

---

## Scope Chain vs Prototype Chain

| Chain | Para qué sirve | Dirección |
|-------|---------------|-----------|
| **Scope Chain** | Buscar variables | Del contexto actual hacia fuera |
| **Prototype Chain** | Buscar propiedades de objetos | Del objeto hacia su prototipo padre |

**Importante:** No tienen relación entre sí.

---

## Razón de existencia

JavaScript usa **Lexical Scope Model**:
- Las funciones capturan el entorno donde fueron escritas
- No donde se ejecutan

Esto permite:
- Closures
- Funciones de orden superior
- Currying
- Programación funcional avanzada

---

## Esquema

```
[Global Scope]
      ↓
[Outer Function Scope]
      ↓
[Inner Function Scope]  ← (Se ejecuta aquí)
```

Búsqueda: `Inner → Outer → Global`

---

Anterior tema: [Function, Context & Variable Environments](./7.%20Function%2C%20Context%20%26%20Variable%20Environments.md) | Siguiente tema: [Scope, ES6 & let](./9.%20Scope%2C%20ES6%20%26%20let.md) | Volver al índice: [Índice Temático](./README.md)
