# Default Values

## Definición

Valores que se asignan a variables o parámetros cuando no se proporciona un valor explícito.

---

## 1. Default values en parámetros de función (ES6)

### Antes de ES6

```js
function saludar(nombre) {
  nombre = nombre || "Invitado";
  console.log("Hola, " + nombre);
}

saludar(); // "Hola, Invitado"
saludar("Felipe"); // "Hola, Felipe"
```

**Problema:** Si pasas `0`, `""` o `false`, se reemplaza con el default:

```js
function contar(numero) {
  numero = numero || 10;
  console.log(numero);
}

contar(0); // 10 (no queremos esto)
```

### Con ES6 (sintaxis moderna)

```js
function saludar(nombre = "Invitado") {
  console.log("Hola, " + nombre);
}

saludar(); // "Hola, Invitado"
saludar("Felipe"); // "Hola, Felipe"
```

**Ventaja:** Solo usa el default si el parámetro es `undefined`:

```js
function contar(numero = 10) {
  console.log(numero);
}

contar(0); // 0 (correcto)
contar(); // 10
contar(undefined); // 10
```

---

## 2. Default values con operador `||`

**Funcionamiento:**  
Devuelve el primer valor truthy.

```js
let nombre = usuario || "Invitado";
let edad = inputEdad || 18;
```

**Problema:** Todos los valores falsy se reemplazan:

```js
let cantidad = 0;
let valor = cantidad || 10; // valor = 10 (no deseado si 0 es válido)

let nombre = "";
let texto = nombre || "Sin nombre"; // "Sin nombre" (aunque "" sea válido)
```

---

## 3. Nullish Coalescing Operator `??` (ES2020)

**Definición:**  
Devuelve el operando derecho solo si el izquierdo es `null` o `undefined`.

```js
let cantidad = 0;
let valor = cantidad ?? 10; // valor = 0 (correcto)

let nombre = "";
let texto = nombre ?? "Sin nombre"; // texto = "" (correcto)

let usuario = null;
let nombre = usuario ?? "Invitado"; // "Invitado"
```

**Diferencia con `||`:**

| Expresión  | `   |            | `           | `??`        |
| ---------- | --- | ---------- | ----------- | ----------- |
| `0         |     | 10`        | `10`        | `0`         |
| `""        |     | "default"` | `"default"` | `""`        |
| `false     |     | true`      | `true`      | `false`     |
| `null      |     | "default"` | `"default"` | `"default"` |
| `undefined |     | "default"` | `"default"` | `"default"` |

---

## 4. Default values en desestructuración

### Arrays

```js
let [a = 1, b = 2] = [10];
console.log(a); // 10
console.log(b); // 2 (default)
```

### Objetos

```js
let { nombre = "Anónimo", edad = 0 } = { edad: 25 };
console.log(nombre); // "Anónimo" (default)
console.log(edad); // 25
```

---

## 5. Optional Chaining `?.` (ES2020)

Accede a propiedades anidadas sin error si una es `null` o `undefined`.

```js
let usuario = {
  nombre: "Felipe",
  direccion: {
    ciudad: "Madrid",
  },
};

console.log(usuario.direccion?.ciudad); // "Madrid"
console.log(usuario.telefono?.numero); // undefined (no error)

// Sin optional chaining
console.log(usuario.telefono.numero); // Error: Cannot read property 'numero'
```

**Con funciones:**

```js
let obj = {};
obj.metodo?.(); // undefined (no error, aunque metodo no existe)
```

---

## 6. Combinando `??` y `?.`

```js
let usuario = null;
let nombre = usuario?.nombre ?? "Invitado"; // "Invitado"

let config = { opciones: { tema: "oscuro" } };
let tema = config?.opciones?.tema ?? "claro"; // "oscuro"

let config2 = {};
let tema2 = config2?.opciones?.tema ?? "claro"; // "claro"
```

---

## Mejores prácticas

1. **Parámetros de función:** Usar sintaxis ES6 `function(param = default)`
2. **Variables:** Usar `??` en lugar de `||` para evitar problemas con valores falsy válidos
3. **Propiedades anidadas:** Usar `?.` para evitar errores
4. **Desestructuración:** Definir defaults en el mismo statement

**Evitar:**

```js
// Malo: 0 se reemplaza con default
let cantidad = input || 10;
```

**Preferir:**

```js
// Bueno: solo null/undefined se reemplazan
let cantidad = input ?? 10;
```

---

## Resumen

| Técnica      | Cuándo usar                     | Problema                        |
| ------------ | ------------------------------- | ------------------------------- | --------------------------------- | ------------------------- |
| `            |                                 | `                               | Valores simples sin falsy válidos | Reemplaza todos los falsy |
| `??`         | Cuando 0, "", false son válidos | Solo para null/undefined        |
| ES6 defaults | Parámetros de función           | Sintaxis más clara              |
| `?.`         | Acceso a propiedades anidadas   | Evita errores de null/undefined |

---

Anterior tema: [Existence and Booleans](./18.%20Existence%20and%20Booleans.md) | Siguiente tema: [Object Literals](./20.%20Object%20Literals.md) | Volver al índice: [Índice Temático](./README.md)
